<!-- CHANGELOG/20251101133045.md -->
# 2025-11-01 13:30:45 UTC — Suporte a credenciais alternativas do OpenRouter

## Arquivos atualizados
- `.env` — adiciona placeholders para `OPENROUTER_COOKIE`, `OPENROUTER_HTTP_REFERER` e `OPENROUTER_APP_TITLE`, alinhando a cadeia de configuração.
- `docker-compose.yml` — propaga as novas variáveis opcionais do OpenRouter para o contêiner `cloud-api`.
- `cloud/api/env.example` — documenta os novos campos exigidos pelo OpenRouter (cookie e metadados).
- `cloud/api/src/config/env.config.ts`, `cloud/api/src/config/env-validator.service.ts` — expõem e validam o uso alternativo de cookie, título e referer na configuração da API.
- `cloud/api/src/openrouter/openrouter.service.ts`, `cloud/api/src/openrouter/openrouter.service.spec.ts` — permitem autenticação via cookie, normalizam cabeçalhos opcionais (`HTTP-Referer`, `X-Title`) e fornecem mensagens de erro mais descritivas.
- `cloud/api/README.md` — orienta sobre o uso de cookie, referer e título aprovados, e atualiza o fluxo `/wa-zip`.
- `proj/01-arquitetura/integracoes-com-apis-spec.md`, `proj/02-design/componentes-spec.md`, `proj/05-entrega-e-implantacao/ambientes-e-configuracoes-spec.md` — refletem a necessidade das novas variáveis RUP ↔ documentação viva.

## Regras e requisitos atendidos
- Mantida a cadeia `.env → docker-compose.yml → serviço`, conforme `AGENTS.md`.
- Atualizadas documentação oficial (`cloud/api/README.md` e artefatos `proj/`) para registrar a alteração funcional.
- Respeitadas as políticas de constantes (valores literais extraídos para o topo) e de comentários de caminho.
- Novos testes unitários (`cloud/api/src/openrouter/openrouter.service.spec.ts`) cobrindo cookie fallback e mensagens de erro.

## Pendências e próximos passos
- Testes `npm test` completos continuam falhando em `src/endpoints.integration.spec.ts` por importação `supertest` pré-existente (TS2349); verificar correção em entrega separada.
- Executado `npx jest src/openrouter/openrouter.service.spec.ts` para validar o módulo alterado.
